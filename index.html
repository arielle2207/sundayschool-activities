<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sunday School Game Library</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans CJK SC","PingFang SC","Microsoft YaHei",sans-serif;
      background:linear-gradient(180deg,#070b14,#0b1220);color:#fff;}
    .wrap{max-width:1100px;margin:0 auto;padding:24px;}
    h1{margin:0 0 6px;font-size:28px;font-weight:900;}
    .sub{color:#b8c0d9;margin-bottom:20px;}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px;}
    .card{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.12);border-radius:18px;padding:18px;
      cursor:pointer;transition:transform .15s ease, background .15s ease;}
    .card:hover{transform:translateY(-3px);background:rgba(255,255,255,0.10);}
    .title{font-size:20px;font-weight:900;margin-bottom:8px;}
    .desc{color:#b8c0d9;font-size:14px;line-height:1.4;}
    .meta{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;}
    .tag{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(122,162,255,0.22);font-size:12px;font-weight:800;}
    .tag2{background:rgba(34,197,94,0.18);}
    .err{color:#ffb4b4;font-weight:800;}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Sunday School Game Library</h1>
    <div class="sub">Pick a game.</div>
    <!-- You can add new games by dropping a JSON file into /games and listing it in manifest.json. -->
     
    <div id="status"></div>
    <div class="grid" id="grid"></div>
  </div>

  <script>
    const grid = document.getElementById("grid");
    const statusEl = document.getElementById("status");

    function openGame(gameFile){
      window.location.href = `play.html?game=${encodeURIComponent(gameFile)}`;
    }

    function typeLabel(t){
      if(t === "reorder") return "Reorder";
      if(t === "wordsearch") return "Word Search";
      return t || "Game";
    }

    async function loadLibrary(){
      try{
        const manifest = await (await fetch("games/manifest.json")).json();

        for(const file of manifest.games){
          const data = await (await fetch(`games/${file}`)).json();

          const card = document.createElement("div");
          card.className = "card";
          card.onclick = () => openGame(file);

          card.innerHTML = `
            <div class="title">${data.title || file}</div>
            <div class="desc">${data.description || ""}</div>
            <div class="meta">
              <span class="tag">${typeLabel(data.type)}</span>
              ${data.age ? `<span class="tag tag2">Age ${data.age}</span>` : ""}
            </div>
          `;
          grid.appendChild(card);
        }
      }catch(e){
        statusEl.innerHTML = `<div class="err">Could not load games. Make sure you are running Live Server and that games/manifest.json exists.</div>`;
        console.error(e);
      }
    }

    loadLibrary();
  </script>
</body>
</html>
